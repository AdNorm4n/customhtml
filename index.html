<div id="aqi-widget" style="font-family: 'Inter', Arial, sans-serif; padding: 15px; border-radius: 10px; background: #400073; color: white; width: 250px;">
  <h3 id="aqi-city">Loading...</h3>
  <p id="aqi-value" style="font-size: 2em; font-weight: bold;">--</p>
  <p id="aqi-status">--</p>
  <small id="aqi-updated">Updated: --</small>
</div>

<!-- Google Fonts: Inter -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<script>
  const token = "902f87a0a51e5839820aae018e6d08cebfdcd2b8";
  const city = "Kuala Lumpur"; // change to your city or station name

  async function fetchAQI() {
    try {
      const res = await fetch(`https://api.waqi.info/feed/${city}/?token=${token}`);
      const data = await res.json();

      if (data.status === "ok") {
        const aqi = data.data.aqi;
        const cityName = data.data.city.name;
        const time = data.data.time.s;

        let status = "";
        if (aqi <= 50) status = "Good 😊";
        else if (aqi <= 100) status = "Moderate 😐";
        else if (aqi <= 150) status = "Unhealthy for Sensitive Groups 😷";
        else if (aqi <= 200) status = "Unhealthy 😷";
        else if (aqi <= 300) status = "Very Unhealthy 😨";
        else status = "Hazardous ☠️";

        document.getElementById("aqi-city").textContent = cityName;
        document.getElementById("aqi-value").textContent = aqi;
        document.getElementById("aqi-status").textContent = status;
        document.getElementById("aqi-updated").textContent = `Updated: ${time}`;
      } else {
        document.getElementById("aqi-city").textContent = "Error fetching data";
      }
    } catch (e) {
      document.getElementById("aqi-city").textContent = "Error loading data";
    }
  }

  fetchAQI();
  setInterval(fetchAQI, 30 * 60 * 1000); // refresh every 30 minutes
</script>
